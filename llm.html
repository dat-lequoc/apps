<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>OpenAI API Demo</title>
  </head>
  <body>
    <input type="password" id="apiKey" placeholder="Enter your OpenAI API key..." style="width: 300px;">
    <br><br>
    <textarea id="userInput" rows="4" cols="50" placeholder="Enter your message here..."></textarea>
    <br>
    <button onclick="callOpenAI()">Send to AI</button>
    <div id="response"></div>

    <script>
      async function callOpenAI() {
        const apiKey = document.getElementById('apiKey').value;
        const userMessage = document.getElementById('userInput').value;
        const responseDiv = document.getElementById('response');
        
        if (!apiKey) {
          responseDiv.innerHTML = 'Error: Please enter an API key';
          return;
        }
        
        responseDiv.innerHTML = 'Loading...';

        try {
          const response = await fetch('https://api.openai.com/v1/chat/completions', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': `Bearer ${apiKey}`
            },
            body: JSON.stringify({
              model: 'gpt-4',
              messages: [{role: 'user', content: userMessage}],
              temperature: 0.7
            })
          });

          const data = await response.json();
          responseDiv.innerHTML = data.choices[0].message.content;
          console.log(data);
        } catch (error) {
          responseDiv.innerHTML = 'Error: ' + error.message;
          console.error('Error:', error);
        }
      }
    </script>
  </body>
</html>
